"use strict";(self.webpackChunkstacklok=self.webpackChunkstacklok||[]).push([[6027],{3905:(e,t,r)=>{r.d(t,{Zo:()=>u,kt:()=>m});var n=r(7294);function o(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function i(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function a(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?i(Object(r),!0).forEach((function(t){o(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function l(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}var s=n.createContext({}),p=function(e){var t=n.useContext(s),r=t;return e&&(r="function"==typeof e?e(t):a(a({},t),e)),r},u=function(e){var t=p(e.components);return n.createElement(s.Provider,{value:t},e.children)},d="mdxType",c={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},g=n.forwardRef((function(e,t){var r=e.components,o=e.mdxType,i=e.originalType,s=e.parentName,u=l(e,["components","mdxType","originalType","parentName"]),d=p(r),g=o,m=d["".concat(s,".").concat(g)]||d[g]||c[g]||i;return r?n.createElement(m,a(a({ref:t},u),{},{components:r})):n.createElement(m,a({ref:t},u))}));function m(e,t){var r=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var i=r.length,a=new Array(i);a[0]=g;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l[d]="string"==typeof e?e:o,a[1]=l;for(var p=2;p<i;p++)a[p]=r[p];return n.createElement.apply(null,a)}return n.createElement.apply(null,r)}g.displayName="MDXCreateElement"},4575:(e,t,r)=>{r.r(t),r.d(t,{assets:()=>s,contentTitle:()=>a,default:()=>c,frontMatter:()=>i,metadata:()=>l,toc:()=>p});var n=r(7462),o=(r(7294),r(3905));const i={id:"enroll_user",title:"Getting Started (Enroll User & Register Repositories)",sidebar_position:4,slug:"/enroll_user",displayed_sidebar:"mediator"},a="Getting Started (Enroll User)",l={unversionedId:"enroll_user",id:"enroll_user",title:"Getting Started (Enroll User & Register Repositories)",description:"Now that you have configured your OAuth provider, you can enroll a user into Mediator.",source:"@site/docs/enroll_user.md",sourceDirName:".",slug:"/enroll_user",permalink:"/enroll_user",draft:!1,tags:[],version:"current",sidebarPosition:4,frontMatter:{id:"enroll_user",title:"Getting Started (Enroll User & Register Repositories)",sidebar_position:4,slug:"/enroll_user",displayed_sidebar:"mediator"},sidebar:"mediator",previous:{title:"Getting Started (Configure OAuth Provider)",permalink:"/config_oauth"},next:{title:"Getting Started (Manage policies and violations)",permalink:"/manage_policies"}},s={},p=[{value:"Prerequisites",id:"prerequisites",level:2},{value:"Login as a user",id:"login-as-a-user",level:2},{value:"Register repositories",id:"register-repositories",level:2},{value:"List and Get Repositories",id:"list-and-get-repositories",level:2}],u={toc:p},d="wrapper";function c(e){let{components:t,...r}=e;return(0,o.kt)(d,(0,n.Z)({},u,r,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("h1",{id:"getting-started-enroll-user"},"Getting Started (Enroll User)"),(0,o.kt)("p",null,"Now that you have ",(0,o.kt)("a",{parentName:"p",href:"./config_oauth"},"configured your OAuth provider"),", you can enroll a user into Mediator."),(0,o.kt)("h2",{id:"prerequisites"},"Prerequisites"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"The ",(0,o.kt)("inlineCode",{parentName:"li"},"medic")," CLI application"),(0,o.kt)("li",{parentName:"ul"},"A ",(0,o.kt)("a",{parentName:"li",href:"./get_started"},"running mediator instance")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"./config_oauth"},"OAuth Configured"))),(0,o.kt)("h2",{id:"login-as-a-user"},"Login as a user"),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},"Log in with username and password.  By default, ",(0,o.kt)("inlineCode",{parentName:"li"},"medic")," will run against localhost, but this can be changed in ",(0,o.kt)("inlineCode",{parentName:"li"},"config.yaml")," in your local directory.")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"medic auth login --username root --password password\n")),(0,o.kt)("blockquote",null,(0,o.kt)("p",{parentName:"blockquote"},(0,o.kt)("strong",{parentName:"p"},"Note"),": The default username and password are ",(0,o.kt)("inlineCode",{parentName:"p"},"root")," and ",(0,o.kt)("inlineCode",{parentName:"p"},"P4ssw@rd")," respectively. You should change these immediately.")),(0,o.kt)("ol",{start:2},(0,o.kt)("li",{parentName:"ol"},"Enroll a user with the given provider")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"medic  enroll provider --provider github\n")),(0,o.kt)("blockquote",null,(0,o.kt)("p",{parentName:"blockquote"},(0,o.kt)("strong",{parentName:"p"},"Note"),": Provide the ",(0,o.kt)("inlineCode",{parentName:"p"},"--group-id")," flag, if your user belongs to multiple groups. For this example, we will use the default group ",(0,o.kt)("inlineCode",{parentName:"p"},"1"),", so we do not need to provide the flag."),(0,o.kt)("p",{parentName:"blockquote"},"A browser session will open, and you will be prompted to login to your GitHub. Once you have granted mediator access, you will be redirected back, and the user will be enrolled. The ",(0,o.kt)("inlineCode",{parentName:"p"},"medic")," CLI application will report the session is complete.")),(0,o.kt)("h2",{id:"register-repositories"},"Register repositories"),(0,o.kt)("p",null,"Now that you have enrolled with GitHub as a provider, you can now register repositories. We will use the ",(0,o.kt)("inlineCode",{parentName:"p"},"repo")," command."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"medic repo register --provider github \n")),(0,o.kt)("p",null,"You can also register a repository (or set of repositories) by name:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},'medic repo register --provider github --repo "owner:repo1,owner:repo2"\n')),(0,o.kt)("p",null,"A webhook will now be created in each repository, and selected repositories will be considered registered within Mediator. Any events that now occur in any registered repository will be sent to Mediator, and processed accordingly."),(0,o.kt)("h2",{id:"list-and-get-repositories"},"List and Get Repositories"),(0,o.kt)("p",null,"You can list all repositories registered in Mediator:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"medic repo list -n github\n")),(0,o.kt)("p",null,"You can also get a specific repository:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"medic repo get -n github -r {$repo_id}\n")))}c.isMDXComponent=!0}}]);